name: Int Tests

on:
 push

jobs:
  int-tests:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v2
        with:
         path: actions-nowsecure
      - name: check PWD
        run: pwd
      - name: Use Node.js 12.x
        uses: actions/setup-node@v1
        with:
          node-version: 12.x
#      - name: Execute Nowsecure action
#        id: nowsecure_action
#        uses: ./actions-nowsecure/
#        with:
#          PLATFORMS: 'ios,android'
#          NOWSECURE_ACCESS_TOKEN: ${{ secrets.NOWSECURE_ACCESS_TOKEN }}
#          IOS_PACKAGE: 'co.uk.camelot'
#          ANDROID_PACKAGE: 'uk.co.theofficialnationallotteryapp.android.play'
#          NOWSECURE_GROUP_ID: ${{ secrets.UK_NOWSECURE_GROUP_ID }}
#          SEVERITY_LIST: 'high,medium,low'
      - name: Run Int Tests
        uses: ./actions-nowsecure/.github/actions/schema-validator
        with:
          MACHINEUSER_GITHUB_TOKEN: ${{ secrets.MACHINEUSER_GITHUB_TOKEN }}
          INPUT_DATA: "{\n  \"6b2a7a6d-a7e5-48a0-b8c9\": {\n    \"key\": \"hey\",\n    \"title\": \"awesome\",\n    \"description\": \"The Local Authentication library was found included in your application binary. At worst, it is being used for biometric authentication that is easily bypassed by someone with access to the device. At best, it is extraneous functionality that should not be included in the app as a best practice.\",\n    \"recommendation\": \"Consider\",\n    \"severity\": \"low\"\n  }\n}"
